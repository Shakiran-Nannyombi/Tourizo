{% extends "admin/base.html" %}

{% block title %}Add New Tour{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <div class="col-12">

            <!-- Enhanced Header -->
            <div class="content-header mb-4">
                <div>
                    <h2 class="page-title">
                        <i class="fas fa-plus-circle me-3" style="color: var(--primary-green);"></i>
                        Add New Tour
                    </h2>
                    <div class="breadcrumb">
                        <i class="fas fa-home"></i>
                        <span>/</span>
                        <span>Admin</span>
                        <span>/</span>
                        <span>Tours</span>
                        <span>/</span>
                        <span>Add New</span>
                    </div>
                </div>
                <a href="{{ url_for('admin.manage_tours') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left me-2"></i> Back to Tours
                </a>
    </div>

            <!-- Add Tour Form -->
            <div class="card">
                        <div class="card-header">
                    <h5 class="card-title mb-0" style="font-size: 2rem;">
                        <i class="fas fa-map-marked-alt me-2" style="color: var(--primary-green); font-size: 2.5rem;"></i>
                        Create New Tour
                    </h5>
                        </div>
                        <div class="card-body">
                    <form method="POST" enctype="multipart/form-data" class="add-tour-form">
                                <!-- Basic Information Section -->
                        <div class="form-section mb-4">
                            <h6 class="section-title">
                                <i class="fas fa-info-circle me-2" style="color: var(--primary-green);"></i>
                                        Basic Information
                            </h6>
                                    
                            <div class="row g-3">
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-tag me-1"></i>
                                                Tour Title
                                            </label>
                                            <input type="text" name="title" class="form-control" placeholder="e.g., Magical Safari Adventure" required>
                                        </div>
                                        
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-map-pin me-1"></i>
                                                Destination
                                            </label>
                                            <input type="text" name="destination" class="form-control" placeholder="e.g., Serengeti National Park" required>
                                    </div>

                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-location-arrow me-1"></i>
                                                Departure Location
                                            </label>
                                            <input type="text" name="departure_location" class="form-control" placeholder="e.g., Nairobi International Airport">
                                        </div>
                                        
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-list me-1"></i>
                                                Category
                                            </label>
                                            <select name="category" class="form-select">
                                                <option value="">Choose your adventure type</option>
                                                <option value="adventure">üéØ Adventure</option>
                                                <option value="culture">üèõÔ∏è Culture</option>
                                                <option value="nature">üåø Nature</option>
                                                <option value="wildlife">ü¶Å Wildlife</option>
                                                <option value="city">üèôÔ∏è City Tours</option>
                                            </select>
                                    </div>

                                <div class="col-12">
                                        <label class="form-label">
                                        <i class="fas fa-align-left me-1"></i>
                                            Short Description
                                        </label>
                                    <textarea name="short_description" class="form-control" rows="3" placeholder="A captivating summary that makes travelers dream..."></textarea>
                                </div>
                            </div>
                                </div>

                                <!-- Tour Details Section -->
                        <div class="form-section mb-4">
                            <h6 class="section-title">
                                <i class="fas fa-cogs me-2" style="color: var(--primary-green);"></i>
                                        Tour Details
                            </h6>
                                    
                            <div class="row g-3">
                                <div class="col-md-3">
                                            <label class="form-label">
                                        <i class="fas fa-clock me-1"></i>
                                                Duration
                                            </label>
                                            <input type="number" name="duration" class="form-control" placeholder="7" min="1">
                                        </div>
                                        
                                <div class="col-md-3">
                                            <label class="form-label">
                                        <i class="fas fa-calendar me-1"></i>
                                                Duration Type
                                            </label>
                                            <select name="duration_type" class="form-select">
                                                <option value="hours">‚è∞ Hours</option>
                                                <option value="days" selected>üìÖ Days</option>
                                                <option value="weeks">üóìÔ∏è Weeks</option>
                                            </select>
                                        </div>
                                        
                                <div class="col-md-3">
                                            <label class="form-label">
                                        <i class="fas fa-chart-line me-1"></i>
                                                Difficulty
                                            </label>
                                            <select name="difficulty" class="form-select">
                                                <option value="easy">üü¢ Easy</option>
                                                <option value="moderate">üü° Moderate</option>
                                                <option value="hard">üî¥ Hard</option>
                                            </select>
                                        </div>
                                        
                                <div class="col-md-3">
                                            <label class="form-label">
                                        <i class="fas fa-dollar-sign me-1"></i>
                                                Price (USD)
                                            </label>
                                            <input type="number" name="price" class="form-control" placeholder="1299" step="0.01">
                                    </div>

                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-users me-1"></i>
                                                Maximum Participants
                                            </label>
                                            <input type="number" name="max_participants" class="form-control" placeholder="12" min="1">
                                        </div>
                                        
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-user-friends me-1"></i>
                                                Minimum Participants
                                            </label>
                                            <input type="number" name="min_participants" class="form-control" placeholder="2" min="1">
                                    </div>

                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-calendar-check me-1"></i>
                                                Available From
                                            </label>
                                            <input type="date" name="available_from" class="form-control">
                                        </div>
                                        
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-calendar-times me-1"></i>
                                                Available To
                                            </label>
                                            <input type="date" name="available_to" class="form-control">
                                        </div>
                                    </div>
                                </div>

                                <!-- Media Section -->
                        <div class="form-section mb-4">
                            <h6 class="section-title">
                                <i class="fas fa-images me-2" style="color: var(--primary-green);"></i>
                                        Visual Content
                            </h6>
                                    
                            <div class="row g-3">
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-image me-1"></i>
                                                Featured Image
                                            </label>
                                    <div class="image-upload-area">
                                        <div class="upload-placeholder">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                                <p>Drop your stunning tour image here</p>
                                        </div>
                                                <input type="file" name="featured_image" class="form-control" accept="image/*">
                                            </div>
                                        </div>
                                        
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-photo-video me-1"></i>
                                                Gallery Images
                                            </label>
                                    <div class="image-upload-area">
                                        <div class="upload-placeholder">
                                            <i class="fas fa-images"></i>
                                                <p>Upload multiple gallery images</p>
                                        </div>
                                        <input type="file" name="gallery_images" class="form-control" accept="image/*" multiple>
                                    </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Content Section -->
                        <div class="form-section mb-4">
                            <h6 class="section-title">
                                <i class="fas fa-edit me-2" style="color: var(--primary-green);"></i>
                                        Detailed Content
                            </h6>
                                    
                            <div class="row g-3">
                                <div class="col-12">
                                        <label class="form-label">
                                        <i class="fas fa-file-alt me-1"></i>
                                            Full Description
                                        </label>
                                        <textarea name="description" class="form-control" rows="5" placeholder="Paint a vivid picture of this incredible journey. What makes this tour special? What experiences await travelers?"></textarea>
                                    </div>

                                <div class="col-12">
                                        <label class="form-label">
                                        <i class="fas fa-route me-1"></i>
                                            Detailed Itinerary
                                        </label>
                                        <textarea name="itinerary" class="form-control" rows="6" placeholder="Day 1: Arrival and welcome dinner&#10;Day 2: Safari adventure begins&#10;Day 3: Cultural village visit..."></textarea>
                                    </div>

                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-check-circle me-1"></i>
                                                What's Included
                                            </label>
                                            <textarea name="inclusions" class="form-control" rows="4" placeholder="‚Ä¢ Accommodation&#10;‚Ä¢ All meals&#10;‚Ä¢ Professional guide&#10;‚Ä¢ Transportation"></textarea>
                                        </div>
                                        
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-times-circle me-1"></i>
                                                What's Not Included
                                            </label>
                                            <textarea name="exclusions" class="form-control" rows="4" placeholder="‚Ä¢ International flights&#10;‚Ä¢ Personal expenses&#10;‚Ä¢ Travel insurance&#10;‚Ä¢ Visa fees"></textarea>
                                        </div>
                                    </div>
                                </div>

                                <!-- SEO & Settings Section -->
                        <div class="form-section mb-4">
                            <h6 class="section-title">
                                <i class="fas fa-search me-2" style="color: var(--primary-green);"></i>
                                        SEO & Settings
                            </h6>
                                    
                            <div class="row g-3">
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-heading me-1"></i>
                                                Meta Title
                                            </label>
                                            <input type="text" name="meta_title" class="form-control" placeholder="SEO-optimized title for search engines">
                                        </div>
                                        
                                <div class="col-md-6">
                                            <label class="form-label">
                                        <i class="fas fa-paragraph me-1"></i>
                                                Meta Description
                                            </label>
                                            <textarea name="meta_description" class="form-control" rows="2" placeholder="Brief description for search engine results"></textarea>
                                    </div>

                                <div class="col-md-6">
                                        <div class="form-check">
                                            <input type="checkbox" name="is_active" class="form-check-input" id="is_active" checked>
                                            <label class="form-check-label" for="is_active">
                                            <i class="fas fa-toggle-on me-1"></i>
                                                Tour is Active
                                                <small class="d-block text-muted">Make this tour available for booking</small>
                                            </label>
                                    </div>
                                        </div>
                                        
                                <div class="col-md-6">
                                        <div class="form-check">
                                            <input type="checkbox" name="is_featured" class="form-check-input" id="is_featured">
                                            <label class="form-check-label" for="is_featured">
                                            <i class="fas fa-star me-1"></i>
                                                Featured Tour
                                                <small class="d-block text-muted">Display prominently on homepage</small>
                                            </label>
                                    </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="form-section text-center">
                                    <button type="submit" class="btn btn-primary me-3">
                                <i class="fas fa-rocket me-2"></i>
                                Create Tour
                                    </button>
                            <a href="{{ url_for('admin.manage_tours') }}" class="btn btn-secondary">
                                <i class="fas fa-times me-2"></i>
                                Cancel
                                    </a>
                                </div>
                            </form>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script>
    // Form validation and enhancements
        document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('.add-tour-form');
        const inputs = document.querySelectorAll('.form-control, .form-select');

        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });

            input.addEventListener('blur', function() {
                this.parentElement.classList.remove('focused');
                if (this.value) {
                    this.classList.add('has-value');
                } else {
                    this.classList.remove('has-value');
                }
            });
        });

        // File upload preview
        const fileInputs = document.querySelectorAll('input[type="file"]');
        fileInputs.forEach(input => {
            input.addEventListener('change', function() {
                const uploadArea = this.parentElement;
                const placeholder = uploadArea.querySelector('.upload-placeholder');
                
                if (this.files.length > 0) {
                    const fileCount = this.files.length;
                    const fileName = fileCount === 1 ? this.files[0].name : `${fileCount} files selected`;
                    placeholder.querySelector('p').textContent = fileName;
                    uploadArea.classList.add('has-files');
                } else {
                    uploadArea.classList.remove('has-files');
                }
            });
        });
        });
    </script>
{% endblock %}